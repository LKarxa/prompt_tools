# Prompt Tools - 提示词管理与激活工具

这是一个用于管理和激活提示词的插件，帮助用户更有效地组织、管理和应用提示词到AI对话中。

可以搭配我的另外一个插件使用https://github.com/LKarxa/astrbot_plugin_regex_filter 

## 功能特点

- 📁 **预设管理**：支持多个提示词预设的加载和切换
- 🔄 **动态激活**：可以在对话中动态激活/关闭特定提示词
- 🔒 **前缀提示**：支持为每个预设设置自动添加的前缀提示
- 🔍 **查看内容**：可以随时查看提示词的详细内容
- 🔄 **实时刷新**：支持重新提取和加载提示词库
- ✏️ **自定义提示词**：允许用户创建、添加和删除自己的提示词
- 🔗 **提示词组合**：支持将多个提示词组合在一起，一键激活

## 命令列表

### 预设管理
- `/prompt presets` - 列出所有可用的提示词预设
- `/prompt use <索引>` - 切换到指定索引的预设
- `/prompt list` - 列出当前预设中的所有提示词
- `/prompt view <索引>` - 查看指定索引的提示词内容
- `/prompt prefix` - 查看当前预设的前缀提示内容
- `/refresh` - 重新提取和加载所有提示词
- `/prompt create_preset <名称>` - 创建一个新的空白预设

### 提示词激活
- `/prompt activate <索引>` - 激活指定索引的提示词
- `/prompt activate @<组名>` - 一键激活组合中的所有提示词
- `/prompt deactivate <索引>` - 关闭指定索引的激活提示词
- `/prompts` - 查看当前激活的所有提示词
- `/clear` - 清空当前激活的所有提示词

### 自定义提示词
- `/prompt add <名称> [内容]` - 添加自定义提示词（如不提供内容，将在下一条消息中获取）
- `/prompt delete <索引>` - 删除指定的用户自定义提示词（仅限用户创建的提示词）

### 提示词组合
- `/prompt group_create <组名> [索引列表]` - 创建提示词组合
- `/prompt group_update <组名> [索引列表]` - 更新提示词组合
- `/prompt group_delete <组名>` - 删除提示词组合
- `/prompt groups` - 列出当前预设的所有提示词组合
- `/prompt group_view <组名>` - 查看提示词组合详情

## 使用方法

1. **准备预设文件**：
   - 在 `data/presets` 目录下上传酒馆预设JSON文件

2. **加载预设**：
   - 插件启动时会自动加载预设
   - 使用 `/prompt presets` 查看所有可用的预设
   - 使用 `/prompt use <索引>` 选择要使用的预设
   - 或使用 `/prompt create_preset <名称>` 创建一个全新的预设

3. **激活提示词**：
   - 使用 `/prompt list` 查看当前预设中的所有提示词
   - 使用 `/prompt activate <索引>` 激活需要的提示词
   - 激活的提示词将自动添加到与AI的对话中

4. **管理激活的提示词**：
   - 使用 `/prompts` 查看当前激活的所有提示词
   - 使用 `/prompt deactivate <索引>` 关闭不需要的提示词
   - 使用 `/clear` 清空所有激活的提示词

5. **创建自定义提示词**：
   - 使用 `/prompt add <名称>` 添加新的提示词
   - 在下一条消息中输入提示词的具体内容
   - 或直接使用 `/prompt add <名称> <内容>` 一次性添加

6. **使用提示词组合**：
   - 使用 `/prompt group_create <组名> 0,1,3` 创建包含多个提示词的组合
   - 使用 `/prompt groups` 查看所有可用的组合
   - 使用 `/prompt activate @<组名>` 一键激活组合中的所有提示词

## 提示词组合使用示例

提示词组合功能可以让你将多个经常一起使用的提示词组合起来，方便快速激活：

1. **创建组合**：
   ```
   /prompt group_create 角色扮演 0,1,2
   ```
   这将创建一个名为"角色扮演"的组合，包含索引为0、1、2的提示词

2. **查看所有组合**：
   ```
   /prompt groups
   ```
   列出当前预设中的所有提示词组合及其包含的提示词

3. **一键激活**：
   ```
   /prompt activate @角色扮演
   ```
   这将一次性激活"角色扮演"组合中的所有提示词

4. **查看组合详情**：
   ```
   /prompt group_view 角色扮演
   ```
   显示组合中包含的所有提示词及其激活状态

5. **更新组合**：
   ```
   /prompt group_update 角色扮演 0,1,2,5
   ```
   修改组合中包含的提示词列表

## 注意事项

- 前缀提示会自动应用于所有对话，无需手动激活
- 切换预设时会清空当前激活的所有提示词
- 刷新提示词库也会清空当前激活的提示词
- 用户创建的自定义提示词会保存在 `data/presets/extracted/<预设名>/` 目录下
- 只能删除用户自己创建的提示词，无法删除从JSON文件中提取的系统提示词
- 提示词组合配置会保存在 `data/presets/extracted/<预设名>_groups.json` 文件中

## 路径说明

- 原始预设文件目录：`data/presets/*.json`
- 提取后的提示词目录：`data/presets/extracted/<预设名>/*.json`
- 提示词组合配置文件：`data/presets/extracted/<预设名>_groups.json`
